<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NICE Prime-Retrieval App</title>
<style>
  /* Make html fill viewport and set dark blue radial background */
  html {
    height: 100%;
    background: radial-gradient(circle at center, #1a0b3b 0%, #000000 70%);
    color: #ddd;
  }

  body {
    margin: 0; 
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    /* No background here to avoid conflicts */
  }

  /* Content container to keep max-width and padding */
  .container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    line-height: 1.5;
    position: relative;
  }

  h1, h2, h3, h4 {
    text-align: center;
    color: #ffd700;
    margin-bottom: 0.3em;
    user-select: none;
  }

  p, ul {
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
    color: #ddd;
  }

  ul.bullet {
    list-style-type: disc;
    margin-left: 2em;
    margin-bottom: 1.2em;
  }

  code {
    background: #333;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
    user-select: text;
    color: #ffd700;
  }

  a {
    color: #ffd700;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  /* Buttons & inputs */
  button, select, input[type=number] {
    font-size: 1rem;
    padding: 10px 15px;
    margin-top: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
    border: none;
    outline: none;
    width: 100%;
    max-width: 350px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    background-color: #222;
    color: #ffd700;
    cursor: pointer;
    transition: background-color 0.25s ease;
    user-select: none;
  }

  button:hover, select:hover, input[type=number]:hover {
    background-color: #444;
  }

  button:disabled {
    background-color: #555;
    cursor: default;
    color: #999;
  }

  /* Sections */
  .section {
    margin-bottom: 40px;
    user-select: none;
  }

  .encourage {
    font-style: italic;
    color: #aaa;
    text-align: center;
    margin-top: 20px;
  }

  #results {
    background: #222;
    border-radius: 8px;
    padding: 15px;
    font-weight: 600;
    color: #ffd700;
    user-select: text;
  }

  /* History and graph container */
  #historyContainer {
    background: #222;
    border-radius: 8px;
    padding: 15px;
    max-height: 200px;
    overflow-y: auto;
    color: #ccc;
    font-size: 0.9rem;
  }

  #trendCanvas {
    display: block;
    margin: 15px auto;
    background: #111;
    border: 1px solid #444;
    border-radius: 8px;
  }

  /* Table for stages */
  table {
    border-collapse: collapse;
    width: 90%;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    color: #eee;
    user-select: text;
  }

  th, td {
    border: 1px solid #444;
    padding: 10px 15px;
    text-align: center;
  }

  th {
    background-color: #333;
    color: #ffd700;
  }

  /* Ambient visual: cosmic canvas */
  #ambientCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: -1;
    pointer-events: none;
  }

  /* Footer */
  footer {
    font-size: 0.8rem;
    color: #aaa;
    text-align: center;
    margin-top: 50px;
    user-select: none;
  }

  footer em {
    font-style: italic;
  }

  /* Override footer expanded section text color */
  #nice-prime-retrieval-expanded {
    color: #ddd;
  }
</style>
</head>
<body>
  <canvas id="ambientCanvas"></canvas>
  <div class="container">

    <h1>NICE Prime‑Retrieval</h1>
    <p style="text-align:center; font-style: italic; margin-top: -1em; margin-bottom: 2em; color:#bbb;">
      Train your intuition. Verify with science.
    </p>

    <!-- 1. Concept Overview -->
    <section class="section" id="conceptOverview">
      <h2>About NICE</h2>
      <p><strong>NICE</strong> stands for <strong>Neurophenomenological Integrated Comparative Empiricism</strong>. It's a convergent framework and platform that unites <em>first‑person experience</em> (intuitive symbols, insights) with <em>third‑person data</em> (accuracy scores, statistical baselines), allowing practitioners to compare and track progress across spiritual disciplines via a shared, verifiable protocol.</p>
      <p><strong>Aim:</strong> To cultivate <em>inner clarity</em> and <em>outer accountability</em>, mapping real shifts in consciousness and deepening our collective understanding of reality.</p>
    </section>

    <!-- 1.2 Difficulty Selector Table -->
    <section class="section" id="difficultyStageOverview">
      <h2>Choose Your Path</h2>
      <table aria-label="Spiritual stages and prime ranges">
        <thead>
          <tr>
            <th>Stage Range</th>
            <th>Name</th>
            <th>Core Capacity Developed</th>
            <th>Next Signs Enabled</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>0 – 99</td><td><strong>Sādhyāka</strong></td><td>Beginner's <em>Mind‑Clearing & Stability</em></td><td>Basic breath tracking, noticing thought‑streams</td></tr>
          <tr><td>100 – 999</td><td><strong>Bhikṣu</strong></td><td>Apprentice's <em>Subtle‑Sense Activation</em></td><td>Synchronicity spotting, symbolic decoding</td></tr>
          <tr><td>1,000 – 9,999</td><td><strong>Arahant</strong></td><td>Adept's <em>Shadow‑Integration & Resilience</em></td><td>Lucid dreaming, inner‑archetype dialogues</td></tr>
          <tr><td>10,000 – 99,999</td><td><strong>Bodhisattva</strong></td><td>Visionary <em>Non‑Local Consciousness Access</em></td><td>Telepathic inklings, transpersonal insights</td></tr>
          <tr><td>100,000 – 999,999</td><td><strong>Buddha</strong></td><td>Master's <em>Embodied Co‑Creative Flow</em></td><td>Healing presence, guided co‑creation with Source</td></tr>
        </tbody>
      </table>
    </section>

    <!-- 2. Pre-Retrieval Guidance -->
    <section class="section" id="preRetrievalGuidance">
      <h2>Pre-Retrieval Guidance</h2>
      <p><em>Optional Preparations (brief checklist):</em></p>
      <ul class="bullet">
        <li>Warm shower (mind purification)</li>
        <li>2–4 hr light fast (clarity)</li>
        <li>5 min asanas & pranayama (energy alignment)</li>
        <li>Plain herbal tea (no sugar/milk)</li>
        <li>30 sec gratitude & surrender (devotional opening)</li>
      </ul>
    </section>

    <!-- 3. Retrieval Screen -->
    <section class="section" id="retrievalSection">
      <h2>Revelatory Retrieval</h2>
      <p style="text-align:center; font-weight:600; font-size:1.1rem;" id="stageNameDisplay">Stage: —</p>
      <p style="max-width:600px; margin-left:auto; margin-right:auto; font-style:italic; text-align:center; user-select:none;">
        Sit quietly. Breathe deeply. Intone:<br/>
        <code>"I surrender to the One Source. Reveal the <span id="primeIndexDisplay">n</span>-th prime."</code><br/>
        Observe symbols, digits, or impressions.
      </p>

      <label for="difficultySelect" style="display:block; max-width:350px; margin:20px auto 0 auto; user-select:none;">Select Your Stage</label>
      <select id="difficultySelect" aria-label="Choose your spiritual stage">
        <option value="1">Sādhyāka (0 – 99)</option>
        <option value="2">Bhikṣu (100 – 999)</option>
        <option value="3">Arahant (1,000 – 9,999)</option>
        <option value="4">Bodhisattva (10,000 – 99,999)</option>
        <option value="5">Buddha (100,000 – 999,999)</option>
      </select>

      <button id="startRetrievalBtn">Summon My Prime</button>

      <p id="retrievalStatus" style="text-align:center; margin-top:1em; font-weight:600; color:#aaf;"></p>

      <div id="timerSection" style="display:none; text-align:center; margin-top:1em; color:#777; user-select:none;">
        Silent timer: <span id="timerCountdown">0</span> sec
      </div>

      <div id="inputSection" style="display:none; margin-top:1.5em; max-width:350px; margin-left:auto; margin-right:auto;">
        <label for="userGuess" style="display:block; margin-bottom:5px;">Enter the prime number you received:</label>
        <input type="number" id="userGuess" placeholder="Your recalled prime number" autocomplete="off" />
        <button id="testSignalBtn">Test My Signal!</button>
      </div>
    </section>

    <!-- 4. Results Screen -->
    <section class="section" id="resultsSection" style="display:none;">
      <h2>Performance Feedback</h2>
      <div id="results"></div>
      <div class="encourage">Stay the path—each session sharpens your receiver.</div>
      <p style="text-align:center; margin-top:1em;">
        <button id="shareBtn">Share My Results</button>
      </p>
    </section>

    <!-- 5. Dashboard & Community -->
    <section class="section" id="dashboardSection">
      <h2>Session History & Trend</h2>
      <div id="historyContainer" aria-live="polite" aria-label="History of your retrieval sessions">
        No sessions recorded yet.
      </div>
      <canvas id="trendCanvas" width="700" height="150" aria-label="Trend graph showing percentage closeness over time"></canvas>
    </section>

    <!-- 6. Footer -->
    <footer>
      <section id="nice-prime-retrieval-expanded" style="max-width:900px; margin:40px auto; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height:1.6;">
        <h2 style="font-weight:bold; font-size:1.6em; margin-bottom:1em; color:#ffd700;">NICE Prime Retrieval - What & Why?</h2>
        <p><strong>Primes</strong> are the indivisible building blocks of number theory — infinite and mysterious. They symbolize purity and indivisibility in mathematics and hold a sacred place in philosophy and spirituality as archetypes of fundamental truth.</p>
        <p>This app uses a unique approach to <em>prime retrieval</em> as a metaphor and practice for tuning human intuition with cosmic order. By focusing on a "prime retrieval" task linked to your spiritual stage, you test and grow your sensitivity to subtle information beyond ordinary cognition.</p>
        <p><strong>Scientific aim:</strong> To empirically measure and map intuitive accuracy, linking neurophenomenological insights to statistical baselines.</p>
        <p><strong>Challenges addressed:</strong> <em>Bridging subjective mystical experience and objective science</em>, overcoming the gap between inner revelation and external validation.</p>
        <p><strong>Hypothesis 1 (H1):</strong> Individuals can improve retrieval accuracy with practice and stage advancement.</p>
        <p><strong>Hypothesis 0 (H0):</strong> Retrieval accuracy is random and unrelated to stage or practice.</p>
        <p>Tracking and community sharing fosters accountability and deepens the ontology of consciousness itself, inspiring both spiritual seekers and scientists.</p>
      </section>
    </footer>

  </div>

  <script>
    // JS part simplified for brevity — can provide full logic on request

    // Define primes for each difficulty (dummy small set)
    const primesByStage = {
      1: [2,3,5,7,11,13,17,19,23,29], // Sādhyāka 0-99 (real app would have bigger lists)
      2: [101,103,107,109,113,127,131,137,139,149],
      3: [1009,1013,1019,1021,1031,1033,1039,1049,1051,1061],
      4: [10007,10009,10037,10039,10061,10067,10069,10079,10091,10093],
      5: [100003,100019,100043,100049,100057,100069,100103,100109,100129,100151]
    };

    const startBtn = document.getElementById('startRetrievalBtn');
    const difficultySelect = document.getElementById('difficultySelect');
    const retrievalStatus = document.getElementById('retrievalStatus');
    const timerSection = document.getElementById('timerSection');
    const timerCountdown = document.getElementById('timerCountdown');
    const inputSection = document.getElementById('inputSection');
    const userGuess = document.getElementById('userGuess');
    const testSignalBtn = document.getElementById('testSignalBtn');
    const resultsSection = document.getElementById('resultsSection');
    const resultsDiv = document.getElementById('results');
    const stageNameDisplay = document.getElementById('stageNameDisplay');
    const primeIndexDisplay = document.getElementById('primeIndexDisplay');
    const historyContainer = document.getElementById('historyContainer');

    let currentPrime = null;
    let timerInterval = null;

    function pickPrime(stage) {
      const primes = primesByStage[stage];
      const idx = Math.floor(Math.random() * primes.length);
      return primes[idx];
    }

    function startRetrieval() {
      const stage = parseInt(difficultySelect.value);
      const stageNames = {
        1: "Sādhyāka (0 – 99)",
        2: "Bhikṣu (100 – 999)",
        3: "Arahant (1,000 – 9,999)",
        4: "Bodhisattva (10,000 – 99,999)",
        5: "Buddha (100,000 – 999,999)"
      };
      currentPrime = pickPrime(stage);

      // Display stage and prime index (just the prime for demo)
      stageNameDisplay.textContent = `Stage: ${stageNames[stage]}`;
      primeIndexDisplay.textContent = currentPrime;

      retrievalStatus.textContent = "Sit silently and intone your mantra...";
      timerSection.style.display = "block";
      inputSection.style.display = "none";
      resultsSection.style.display = "none";
      userGuess.value = "";

      // 15 sec countdown
      let timeLeft = 15;
      timerCountdown.textContent = timeLeft;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerCountdown.textContent = timeLeft;
        if(timeLeft <= 0) {
          clearInterval(timerInterval);
          timerSection.style.display = "none";
          inputSection.style.display = "block";
          retrievalStatus.textContent = "Now enter the prime you perceived.";
        }
      }, 1000);
    }

    function testSignal() {
      const guess = parseInt(userGuess.value);
      if (isNaN(guess)) {
        alert("Enter a valid number.");
        return;
      }
      // Compute closeness score as percentage (simplified)
      const diff = Math.abs(guess - currentPrime);
      const maxDiff = currentPrime;
      const score = Math.max(0, 100 - (diff / maxDiff) * 100);

      resultsDiv.textContent = `You recalled: ${guess}. Actual prime: ${currentPrime}. Accuracy: ${score.toFixed(2)}%`;
      resultsSection.style.display = "block";

      // Update history
      const entry = document.createElement('div');
      entry.textContent = `${new Date().toLocaleTimeString()}: Accuracy ${score.toFixed(2)}%`;
      historyContainer.appendChild(entry);

      // Scroll history to bottom
      historyContainer.scrollTop = historyContainer.scrollHeight;
    }

    startBtn.addEventListener('click', startRetrieval);
    testSignalBtn.addEventListener('click', testSignal);
  </script>
</body>
</html>
